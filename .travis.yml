# reference: https://github.com/biocore/DEICODE/blob/master/.travis.yml
# for running R code: https://github.com/aguang/transmissim/blob/b634f6009c42c2820da75fda2e46a60fef55f848/.travis.yml

sudo: false
language: python
env:
  - PYVERSION=3.5
before_install:
  - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
  - chmod +x miniconda.sh
  - ./miniconda.sh -b
  - export PATH=/home/travis/miniconda3/bin:$PATH
  - conda config --set always_yes yes
  - conda install -c anaconda setuptools
  - conda update -q conda
  - conda info -a
install:
  - wget -q https://raw.githubusercontent.com/qiime2/environment-files/master/latest/staging/qiime2-latest-py36-linux-conda.yml
  - conda env create -q -n test-env --file qiime2-latest-py36-linux-conda.yml
  - source activate test-env  
  - conda install -c bioconda -c conda-forge -c r bioconductor-phyloseq r-devtools r-magrittr r-dplyr r-vgam r-tidyr r-vegan r-reshape2 r-rcpp r-rcpparmadillo r-gridextra r-ggplot2 r-ggthemes
  - Rscript -e 'devtools::install_github("cozygene/FEAST", ref = "FEAST_beta")'
